<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta name="keywords" lang="en" content="Deep Sky Stacking Astrophotography Bayer matrix">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>DeepSkyStacker - Technical Info</title>
<style>
<!--
 div.MsoNormal
	{mso-style-parent:"";
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";
	margin-left:0cm; margin-right:0cm; margin-top:0cm}
.Standard    { text-align: justify; margin-left: 5; margin-right: 10 }
-->
</style>
</head>

<body>

<p><b><span lang="EN-US" style="font-size: 18.0pt; font-family: Arial">Detalhes
Tecnicos</span></b></p>
<blockquote>

<p><b><span style="font-family: Arial"><a href="#Registering">Registo</a><br>
<a href="#Alignment">Alinhamento</a><br>
<a href="#FileGroups">Grupos de Ficheiros</a><br>
<a href="#Stacking">Integracao-Empilhamento</a><br>
<a href="#stackingmethods">Metodos de Integracao</a><br>
<a href="#Drizzle">Drizzle</a><br>
<a href="#cometstacking">Integracao de Cometas</a><br>
<a href="#rawdecod">Processo de desenvolvimento de imagens RAW</a></span></b></p>
</blockquote>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="2" width="100%" noshade color="blue" align="center"></span>
</div>
<p align="justify"><b>
<span lang="EN-US" style="font-size: 13.5pt; font-family: Arial; color: red">
<a name="Registering"></a>Registo</span><span lang="EN-US" style="font-family: Arial"><br>
</span><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Deteccao
de estrelas</span><span lang="EN-US" style="font-family: Arial"><br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">O
DeepSkyStacker detecta automaticamente as estrelas em cada fotografia.<br>
O DSS procura arredondar potualmente as estrelas atraves da luminancia
disfarcando o que puder no arrastamento de algumas estrelas.<br>
Assim que a estela e detectada e utilizada a curva de Gaussian
para valores de luminancia.</span></p>
<hr color="#0000FF" size="1">
<p align="justify"><font face="Arial"><b><font size="2">A aplicacao dos darks, flats e offsets
e feita antes do registo</font><br>
</b><font size="2">Se o fotogramas dark, flat e/ou offset forem verificados
automaticamente, serao aplicados antes do processo do registo.<br>
É altamente recomendaddo serem verificados (os fotogramas) por ordem, pelos dark frames para deteccao de falsas estrelas
que e altamente perturbador no alinhamento dos fotogramas.</font></font></p>
<hr color="#0000FF" size="1">
<p align="justify"><font face="Arial"><b>
<font size="2"><a name="hotpixels"></a>Deteccao Automatica dos Pixels Quentes</font><br>
</b><font size="2">Por opcao, DeepSkyStacker tenta detectar pixels quentes durante
o processo de registo evitando a deteccao de falsas estrelas.<br>
Esta opcao so funciona com imagens monochromaticas
e imagens RAW <a href="#superpixel">Super-pixels</a>, <a href="#bayerdrizzle">
Bayer.Drizzle</a>, bilinear e AHD modos de interpolacao.</font></font></p>
<hr color="#0000FF" size="1">
<p align="justify"><b><font face="Arial" size="2"><a name="detectionthreshold"></a>Ajustando a
deteccao de threshold nas estrelas</font></b><font size="2" face="Arial"><b><br>
</b>A deteccao de threshold na estrela e 10% por inerencia-defeito (10% de maxima
luminancia).<br>
Podera mudificar este threshold na opcao Avançada ( Aba ) na caixa de ddetectara estrelas mais distantes.
por outro lado, se aumentar o valor do threshold apenas as maiores estrelas serao
detectadas.<br>
<br>
Para ajuda-lo a encontar o melhor threshold para os seus fotogramas pode constactar no programa
o numero de estrelas que serao detectadas. Para o fazer, o DeepSkyStacker usa a
primeira verificacao dos fotogramas activando temporariamente a deteccao dos pixels quentes.</font></p>
<p align="justify"><font size="2" face="Arial">Devera ter em atencao que este numero um indicativo
do numero real de estrelas detectadas que podera variar se verificar os fotogramas do dark,
do offset e do flat.</font></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="1" noshade color="blue"></span>
</div>
<p align="justify"><b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">
Registando os resultados<br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">O
registo dos resultados (numero de estrelas detectadas, posicao, luminancia de cada estrela)
sao salvos num ficheiro de texto com o nome do ficheiro do ficheiro da fotografia com a extencao
.Info.txt.<br>
Nos futuros processos de Integracao, estes ajustes de registo
no processo sao desnecessarios.</span></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="1" noshade color="blue"></span>
</div>
<p align="justify"><b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">
Registo de resultados e Parametros<br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">O
registo dos resultados esta muito dependente das atribuicoes dos parametros (especialmente
 
the <a href="userguide.htm#rawddp">nos paramentos de desenvolvimento Raw</a>).<br>
Se esses parametros forem modificados e necessario registar de novo as fotos.
</span></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="1" noshade color="blue"></span>
</div>
<p align="justify"><b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Integrar
depois de registar<br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">
DeepSkyStacker pode criar uma corrente dos processos de registo e integracao. Apenas tem que dar
uma percentagem de fotos que deseja manter ate ao fim do
processo do registo para se dar inicio ao processo de integracao. Somente as melhores fotografias
serao usadas no processo de integracao.<br>
Estas funcionalidades permitem a realizacao de todo o processo podendo ir dormir sabendo que
quando levantar podera ver os primeiros resultados.</span></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="2" width="100%" noshade color="blue" align="center"></span>
</div>
<p align="justify"><b>
<span lang="EN-US" style="font-size: 13.5pt; font-family: Arial; color: red">
<a name="Alignment"></a>Alinhamento</span><span lang="EN-US" style="font-family: Arial"><br>
</span><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Offsets 
e analise computacional angular</span><span lang="EN-US" style="font-family: Arial"><br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">
Durante o processo de alinhamento as melhores fotos (as fotos com as melhores contagens de estrelas)
sao usadas como fotogramas de referencia a nao ser que escolha um fotograma como referencia
usando o <a href="userguide.htm#contextmenu">contexto do menu</a>.<br>
Todos os  offsets e angulos de rotacao sao analizados relativamente ao fotograma de
referencia.<br>
<br>
Os offsets rodam angularmente permitindo ao PC identificar padroes de estrelas nos
fotoramas.<br>
Numa linguagem mais tecnica os algaritmos procuram por grandes areas triangulares cruzando
varias distancias (e medindo os multiplos angulos) obtendo um padrao.<br>
Quando obtem o numero suficiente desses triangulos que sao detectados entre o fotograma de referencia
e o fotograma, este ultimo vai ser alinhado com o offsets e a rotacao angular criada pelo PC que
sera validada usando o ultimo metodo do quadrado.<br>
Dependendo do numero de estrelas a raiz quadrada da transformacao bilinear e usada.<br>
<br>
Podera consultar o seguinte sitio que me serviu de inspiracao para realizar o
DeepSkyStacker:</span><font size="2" face="Arial"><br>
<a target="_blank" href="http://adsabs.harvard.edu/cgi-bin/nph-bib_query?bibcode=1995PASP..107.1119V&db_key=AST&high=39463d35aa24090">
FOCAS Automatic Catalog Matching Algorithms</a><br>
<a target="_blank" href="http://lear.inrialpes.fr/pubs/2004/MR04/">Pattern 
Matching with Differential Voting and Median Transformation Derivation</a></font></p>
<p align="justify"><font face="Arial" size="2"><b><a name="stackinfofile"></a>
Uso previo automatico de offsets e de angulos criados pelo PC<br>
</b>DeepSkyStacker guarda todas as transformacoes entre o fotograma de referencia
e todos os outros fotogramas para que nao seja necessario re-introduzi-los de novo,
se a informacao de registo nao tenha sido modificada.<br>
A informacao e guardada com o nome do ficheiro, logo apos o fotograma de referencia (e na mesma
pasta) com <i>.stackinfo.txt</i> como extensao do ficheiro.</font></p>
<hr color="#0000FF">
<p align="justify"><b><font face="Arial" size="4" color="#FF0000">
<a name="FileGroups"></a>Grupos de Ficheiros<br>
</font></b><font size="2" face="Arial"><a name="filegroup"></a>Grupos de ficheiros
podem ser usados em multiplas noites para simplificar o processo relativo ao mesmo objecto nos ficheiros e respectiva pasta
para cada sessao de imagens.<br>
<b>Se usa apenas o <i>Grupo Principal</i> DeepSkyStacker ele funciona exactamente da mesma forma
que se entrasse ataves, da " Introducao aos Ficheiros de Grupo ".</b><br>
<br>
Existem dois tipo sde grupos de ficheiros: o Grupo Principal e todos os outros grupos.</font></p>
<ul>
  <li>
  <p align="justify"><font size="2" face="Arial">Fotogramas do objecto fotografado (Abra as suas fotos) do <i>Grupo Principal</i> esta
  associado aos ficheiros Dark, Flat e Offset/Bias do <i>Grupo
  Principal</i>. <br>
  Estes sao os procedimentos do DeepSkyStacker na apresentacao do Grupo
  Principal ( apresentacao da tela principal ).</font></li>
  <li>
  <p align="justify"><font size="2" face="Arial">Dark, Flat ed Offset/Bias Frames do
  Grupo Principal estao associados aos fotogramas de qualquer pasta.</font></li>
  <li>
  <p align="justify"><font size="2" face="Arial">Fotogramas do Dark, Flat  Offset/Bias de outras
  pastas podem estar associadas apenas com os fotogramas da mesma pasta.</font></li>
</ul>
<p align="justify"><font size="2" face="Arial">Pode criar o numero de ficheiros de grupo que quiser
sabendo que cada ficheiro pertencera apenas a um grupo de ficheiros.<br>
Quando iniciar o DeepSkyStacker apenas o Grupo Principal esta disponivel. Logo que se comece a juntar
ficheiros to the last available group a new empty group tab is created.<br>
<br>
<b>Por exemplo:<br>
</b>Durante duas noites faz duas series de fotogramas do mesmo objecto. <br>
Por cada niote tera os fotogramas dos Dark e Flat mas a temperatura nao e a mesma
pelo que os fotogramas dos Darks nao sao compativeis e a orientacao ( movimento algular das estrelas )
sao imperceptivelmente diferentes de uns fotogramas
para os outros.<br>
<br>
Associar cada fotograma com o bom fotograma Dark e Flat e o que e preciso
para colocar os fotogramas de Light+Dark+Flat desde a primeira noite numa pasta (ficheiro de grupo) e
todos o fotogramas de Light+Dark+Flat na segunda noite numa outra pasta ( ficheiro de grupo ).<br>
Apenas os fotogramas Offset/Bias  que sao comuns as duas noites terao que ser colocados no <i>
Grupo Principal</i>.<br>
<br>
DeepSkyStacker automaticamente associa os fotogramas da primeira noite
com os Darks e Flat dessa noite, fazendo o mesmo com  os fotogramas
e darks e flats da segunda noite. <br>
O Offset/Bias do grupo principal serao associados aos fotogramas
da primeira  <b>e</b> segunda noite.</font></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="2" width="100%" noshade color="blue" align="center"></span>
</div>
<p align="justify"><b>
<span lang="EN-US" style="font-size: 13.5pt; font-family: Arial; color: red">
<a name="Stacking"></a>Integracao ( empilhamento )</span><span lang="EN-US" style="font-family: Arial"><br>
<font size="2"><a name="backgroundcalibration"></a>Calibracao </font>
</span></b><font face="Arial"><b><font size="2">do background(tela de fundo negra do Pc)</font><br>
</b><font size="2">Esta calibracao consiste na harmonizacao
dos valores do Background do seu Pc, com os fotogramas, antes de serem integrados.<br>
O valor do background e defenido como a media de valores de todos os pixels
de todos os fotogramas.</font></font></p>
<p align="justify"><font face="Arial" size="2">Existem duas formas de o fazer.</font></p>
<ul>
  <li>
<p align="justify"><font face="Arial" size="2"> 1 - <b>Por Calibracao
de Canal do Background</b> nesta opcao cada canal e ajustado separadamente
para combinar com o background, criando um fotograma de referencia .</font></p>
  </li>
  <li>
<p align="justify"><font face="Arial" size="2"> 2 - <b>Calibracao de
canais RGB</b> vermelho<font color="#FF0000"></font>,
<font color="#008000">verde</font> e <font color="#0000FF">azul</font>
Cada fotograma e harmonizado com os valores do background em tres
medianas (uma por cada canal) tomando em consideracao os valores
do fotograma de referencia. Em cima criam-se imagens compativeis(stacking wise) esta
opcao tambem permite criar um background de cinzentos neutrais.</font></p>
  </li>
</ul>
<p align="justify"><font face="Arial" size="2"></font></p>
<hr color="#0000FF" size="1">
<p align="justify"><font face="Arial"><font size="2">
<b><a name="flatcalibration"></a>Calibracao Automatica de Flat frames</b></font><b><br>
</b><font size="2">Esta calibracao de flat frames corresponde a
equalizaçao de diferentes luminosidades entre o flat frames (antes de swerem combinados)
como o master flat.<br>
<br>
O primeiro fotograma do flat e usado como referencia. Os outros fotogramas sao
harmonizados combinando os niveis de luminosidade e os limites dinamicos do primeiro
fotograma do flat.</font></font></p>
<hr color="#0000FF" size="1">
<p align="justify"><font face="Arial"><font size="2">
<b><a name="hotpixelsremoval"></a>Deteccao Automatica e Remocao dos pixels quentes</b></font><b><br>
</b><font size="2">Traduz-se na subtituicao dos
pixels quentes com valores de pixels proximos que estoa bons.<br>
<br>
<br>
<br>
</font></font></p>
<hr color="#0000FF" size="1">
<p align="justify"><font face="Arial"><font size="2">
<b><a name="badlinesdetection"></a>Deteccao automatica e remocao </b></font><b>
<font size="2">de artefactos</font><br>
</b><font size="2">Exemplo: blooming.<br>
<br>
<br>
Serao copiadas colunas verticais e colunas horizontais de pixels bons nas proximidades, para sobrepor na area em causa</font></font></p>
<hr color="#0000FF" size="1">
<p align="justify"><font face="Arial"><font size="2">
<b><a name="darkentropy"></a>Entropia baseada na subtraccao do Dark frame</b></font><b><br>
</b><font size="2">Por opcao a subtraccao do dark frame pode ser optimizada no resultado
da entropia na fotografia (light frame menos dark frame) minimizada
aplicando um coeficiente entre 0 e 1 no dark frame.<br>
<br>
</font></font><font size="2" face="Arial"><br>
Se quiser saber mais sobre este assunto consulte o documento:<br>
<a target="_blank" href="http://www.cs.ubc.ca/~heidrich/Papers/PICS.01.pdf">
Entropy-Based Dark Frame Subtraction</a></font></p>
<hr color="#0000FF" size="1">
<p align="justify"><b>
<span lang="EN-US" style="font-family: Arial">Processo de
Integracao<br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">O
DeepSkyStacker tem o processo de integracao classico.<br>
<b>1 - Passo<br>
</b>Criacao do master offset atraves de todos os offset frames (pelo
metodo de seleccao).<br>
Se for mais que um offset frame verificados, um master offset e criado como
MasterOffset_ISOxxx.tif (TIFF 8, 16 or 32 bit) na pasta do primeiro offset frame.<br>
Este ficheiro pode ser usado como o unico offset frame na proxima vez.<br>
<br>
<b>2 - Passo<br>
</b>Criacao de um Master dark atraves de todos os dark frames (pelo metodo de
seleccao). o master offset e
subtraido a cada dark frame.<br>
Se existe mais de que um dark frame verificado, um master dark e criado como
MasterDark_ISOxxx_yyys.tif (TIFF 8, 16 or 32 bit) na pasta do primeiro dark frame.<br>
Este ficheiro pode ser usado como unico dark frame da proxima vez.<br>
<br>
Criacao de um master dark flat atraves dos dark flat frames (pelo metodo de
seleccao). O master offset e
subtraido de cada dark flat frame.<br>
Se exite mais do que um dark flat verificado, o master dark flat e creado como MasterDarkFlat_ISOxxx_yyys.tif (TIFF 8, 16 or 32 bit) na pasta do primeiro
fotograma do dark.<br>
Este ficheiro pode ser usado como o unico dark flat frame da proxima vez.<br>
<br>
<b>3   -  Passo<br>
</b>Criacao de um  master flat atraves dos flat frames (pelo metodo de
seleccao). O master offset e o dark flat sao
Se existir mais que um flat frame verificado, o master flat e criado como
MasterFlat_ISOxxx.tif (TIFF 8, 16 or 32 bit) na pasta do primeiro flat frame.<br>
Este ficheiro pode ser usado como o unico flat frame na proxima vez.<br>
<br>
<b>4   -  Passo<br>
</b>A computorizacao de todos os offsets e rotacoes de todos os fotogramas terao como resultado final
a integracao.<br>
<br>
<b>5   -   Passo<br>
</b>A criacao final da fotografia resulta na integracao  com o metodo
selecionado. <br>
O master
offset e o master dark sao automaticamente subtraidos de cada fotograma e o  resultado
e dividido pelo master flat calibrado, e se esta opcao estiver activada os pixels quentes
detectados no dark frame sao removidos e o valor e interpolado por valores
semelhantes nas proximidades.<br>
<br>
<b>6   -   Passo<br>
</b>Quando o
<a style="color: blue; text-decoration: underline; text-underline: single" href="#bayerdrizzle">Bayer drizzle</a> esta activo, os canais RGB ficam normalizados
evitando falta de informacao.<br>
<br>
<b>7   -   Passo<br>
</b>A fotografia final e automaticamente guardada no ficheiro AutoSave.tif
que e criado na pasta do primeiro fotograma.</span></p>
<hr color="#0000FF" size="1">
<p align="justify"><b>
<span lang="EN-US" style="font-family: Arial"><a name="ChannelsAlignment"></a>
Alinhamento do canais RGB<br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Quando
esta opcao esta activa o DeepSkyStacker tenta fazer o alinhamento dos tres canais (RGB) para
reduzir os efeitos das falsas cores entre os canais, no resultado final da imagem.<br>
Isto traduz-se na fotografia nao mostrar as estrelas mais vermelhas de um lado e mais
azuis do outro lado ( se dividimos visualmente a fotografia ao meio, vemos esse efeito).<br>
<br>
Cada canal e registado (as estrelas sao detectadas) e a transformacao (feita pelo Pc)
e entre o melhor e os outros dois.<br>
Esta transformacao e agora aplicada aos outros dois canais que sao alinhados com
o melhor canal.</span></p>
<hr color="#0000FF" size="1">
<p align="justify"><b>
<span lang="EN-US" style="font-family: Arial"><a name="reusemasters"></a>
Uso previo automatico para criar master files<br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">A
existencia de um master file-fotograma mestre (dark, bias, flat e dark flat) criado da lista de ficheiros
sao automaticamente usados sempre e quando for possivel e durante :<br>
- A lista de ficheiros usados que os criaram, nao tenha sido modificada.<br>
- As configuracoes criadas para os usar, nao tenham sido modificadas. Esta aqui incluido
a combinacao dos metodos e parametros ... as configuracoes DDP dos RAW ou FITS, quando os ficheiros RAW ou FITS
sao usados.<br>
<br>
Um ficheiro de texto contendo os parametros e a lista dos ficheiros usados para
criar a imagem master-fotografia mestre, e guardada na pasta dos ficheiros master( master File ).<br>
O ficheiro e nomeado apos o ficheiro master, e com a extencao .Description.txt <br>
<br>
Quando a discricao nao corresponder com as novas configuracoes o master files sera
automaticamente criado de novo .<br>
<br>
Esta caracteristica e invisivel para o utilizador que apenas ve o rapido processamento dos dados
nao sendo necessario a criacao de um novo ficheiro master.</span></p>
<hr color="#0000FF" size="1">
<p align="justify"><b><font face="Arial"><a name="customrect"></a>Usando um rectangulo
previamente defenido</font></b><font face="Arial"><b><br>
</b><font size="2">Voce pode optar por usar um redimencionamento no DeepSkyStacker
defenindo o tamanho da fotografia no processo final da imagem.<br>
<br>
Primeiro, clique na imagem (na pasta onde estao. Covem ser a 1ª imagem como referencia) para ver o tamanho dela . Depois
selecione a area rectangular na imagem. Esta atitude vai defenir-se como padrao para
todas as outras imagens-fotogramas. Para o fazer entre em <a href="userguide.htm#contextmenu">contexto do menu</a>.<br>
<br>
Agora, selecione a area rectangular na imagem que voce vai usar como area rectangular
modelo.<br>
Quando se iniciar o processo de integracao, o rectangulo que voce criou sera
adoptado no processo de integracao.<br>
<br>
Esta opcao podera ser de grande ajuda e utilitariaquando usada com  <a href="#Drizzle">
a opcao Drizzle </a> que duplica ou triplica ( o Drizzle ) o resultado da imagem e
alem disso exige muito mais memória e espaco em disco durante o processo de integracao.<br>
<br>
De facto, quando padronizamos  o retangulo para dimensoes inferiores, da estipulada de origem,
o DeepSkyStacker apenas usará a memoria e o espaço em disco necessarios como suficientes paras as operacoes.</font></font></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="2" width="100%" noshade color="blue" align="center"></span>
</div>
<p align="justify"><b><font face="Arial" color="#FF0000"><a name="stackingmethods"></a>Metodos de Integracao</font><font face="Arial" size="2"><br>
<font color="#800000">Proporcao</font><br>
</font>
</b><font face="Arial" size="2">Este e um metodo simples. A media de todos os pixels e
por cada pixel.<br>
<br>
<b><font color="#800000">Media-Mediana</font><br>
</b>Este e o metodo usual quando se utilizam os masters dark criados, flat e
offset/bias. O valor mediano de cada pixel integrado e calculado por cada
pixel.<br>
<br>
<b><font color="#800000">Maximo</font><br>
</b>Este e um metodo extremamente simples utilizado quando existe muitos cuidados. O
valor maximo de todos os pixels na integracao e calculado por cada pixel.<br>
Pode ser util para encontar algum erro na integracao mostrando todos os defeitos
de todas as imagens calibradas.<br>
<br>
<b><font color="#800000">Limando-Aparando com Kappa-Sigma</font><br>
</b>Este e o metodo usado para eliminar literalmente o desvio dos pixels.<br>
Dois parametros sao usados: numeros de iteraccoes e o uso do desvio stand-normal
que e multiplicativo (Kappa).<br>
<br>
<br>
</font></p>
<p align="justify"><font face="Arial" size="2">
<b><font color="#800000">Media do Kappa-Sigma ajustado</font><br>
</b>Este metodo e parecido ao Kappa-Sigma Limado, mas em vez de
rejeitar os valores dos pixels, subtituo-os por uma media de valores.</font></p>
<p align="justify"><font face="Arial" size="2"><font color="#800000"><b>Avaliacao auto adaptativa
da proporcao</b></font><br>
Esta avaliacao da proporcao e adaptada do trabalho de Stetson (<a href="http://archive.eso.org/archive/hst/wfpc2_asn/3sites/WFPC2_Newsletter.pdf">see</a><a target="_blank" href="http://archive.eso.org/archive/hst/wfpc2_asn/3sites/WFPC2_Newsletter.pdf">
Artificial Skepticism - Stetson 1989</a>).<br>
Este metodo calcula a consistente proporcao obtida por iteractividade analisada de cada
pixel desde o desvio do padrao comparativamente ao desvio stand criado.<br>
<br>
<font color="#800000"><b>Analise da entropia proporcional (High Dynamic Range)</b></font><br>
Este metodo e baseado no trabalho de German, Jenkin e Lesperance (<a target="_blank" href="http://doi.ieeecomputersociety.org/10.1109/CRV.2005.38">veja
Entropy-Based image merging - 2005</a>) usado para integrar as fotografias harmonizando-as
mantendo em cada pixel a melhor dinamica.<br>
E particularmente importante quando se integram fotografias com diferentes tempos de exposicao
e diferentes Velocidades e Sensibilidades ISO, numa enorme riqueza de informacao
logaritmica. Usando este conhecimento, evita-se queimar o centro das nebulosas e galaxias.<br>
Nota: este metodo exige uma intensa aplicaçao da memoria e do processador do CPU.</font></p>
  <span lang="EN-US">
  <hr size="2" width="100%" noshade color="blue" align="center">
<p align="justify"><b><font face="Arial" size="4" color="#FF0000">
<a name="Drizzle"></a>Drizzle</font></b><br>
<font face="Arial" size="2">Drizzle e um metodo desenvolvido pela NASA para o
Hubble Space Telescope.<br>
O algaritmo e conhecido como a Reconstruçao Linear da Variaçao do Pixel.<br>
<br>
Tem um leque vasto de aplicacoes desde  modificacoes de resolucao
na integracao de imagens comparadas, ate a simples resolucao harmoniosa duma imagem
preservando as suas caracteristicas (cor, brilho).</font></p>
<table border="0" cellspacing="1" width="100%" id="AutoNumber4">
  <tr>
    <td width="40%" valign="top">
    <p class="Standard">
  <span lang="EN-US">
    <font face="Arial" size="2">Basicamente cada imagem passa por uma grande prova
    antes de ser integrada, como seja 2 ou 3 vezes o seu redimencionamento ( pode ser
    qualquer valor acima de 1 mas o DeepSkyStacker e o unico que propoe 2 or 3 esse
    valor), projectando finalmente a imagem numa fina grelha de pixeis.<br>
    <br>
    O resultado final e uma imagem com o dobro ou triplo relativamente ao tamanho original da imagem
    e o objecto em si ocupara apenas algumas dezenas de pixels.</font></span></td>
    <td width="60%">
    <p align="center">
    <img border="0" src="../images/Drizzle.jpg" align="center" width="250" height="250"></td>
  </tr>
  <tr>
    <td width="40%" valign="top">
    <p class="Standard"><font face="Arial" size="2">
  <span lang="EN-US">
    <b>Como e quando devera usar a opcao Drizzle</b><br>
    Basicamente quando tiver muitas imagens que nao estao perfeitamente
    alinhadas (suficiente para alguns pixels desalinhados). <br>
    Nao faz sentido
    se tiver apenas alguns fotogramas.<br>
    <br>
    Drizzling e particularmente bom para alteracoes de resolucao. Resumindo, e
    muito util com pequenas distancias focais em pequenos objectos.<br>
    <br>
    Na direita encontra-se um objecto ainda nao processado M57 (usado um telescopio de 10&quot;, F/D
    4.72 OTA com a Canon DSLR).<br>
    <br>
    Normalmente a M57 e muito pequena, mas usando o metodo drizzle 2x e cerca de 100
    fotogramas o resultado da imagem e duas vezes maior e a resolucao e muito
    melhor.<br>
    <br>
    Passe o rato-mouse por cima para ver<br>
&nbsp;&nbsp; <a onmouseover="document['DRIZZLE01'].src='../images/M57_NoDrizzle.jpg';;document.getElementById('DRIZZLELEGEND01').innerHTML='M57 - No Drizzle - Enlarged 4 times';" href="javascript:void(0);">
nao processada M57 - Sem Drizzle (enlarged 4 times)</a><br>
&nbsp;&nbsp; <a onmouseover="document['DRIZZLE01'].src='../images/M57_Drizzle.jpg';;document.getElementById('DRIZZLELEGEND01').innerHTML='M57 - 2x Drizzle - Enlarged 2 times';" href="javascript:void(0);">
nao processada M57 - Com 2x Drizzle (enlarged 2 times)</a></span></font></td>
    <td width="60%">
    <p align="center">
    <img id="DRIZZLE01" name="DRIZZLE01" border="0" src="../images/M57_NoDrizzle.jpg" width="411" height="353"><br>
    <font face="Arial" size="2"><b id="DRIZZLELEGEND01" name="DRIZZLELEGEND01">M57 - No Drizzle</b></font></td>
  </tr>
</table>
<p align="justify"><font face="Arial" size="2"><b>Como e feito o drizzling </b><br>
Para efectuar o Drizzle e necessario muita memoria e espaço em disco para
que o processo de criacao seja multiplicado pelo quadrado do factor Drizzle.
Claro que o tempo para criar uma imagem destas e muito longo.<br>
<br>
Por exemplo, usando 2x Drizzle com 3000x2000 pixels na imagem will criara uma
imagem de 6000x4000 pixels, pelo qu precisara 4 vezes mais de memoria e espaço em disco,
para o tamanho de imagem que vai ser criada.<br>
<br>
Usando a opcao 3x Drizzle, tudo e multiplicado por 9 (3 ao quadrado) e
a menos que you have tenha um CPU poderoso com memoria e espaço em disco disponivel
nao use este sistema nas imagens de DSLR.<br>
<br>
Contudo, algumas pequenas imagens (como as que sao criadas pelas primeiras DSI e LPI
cameras), pode fazer algum sentido usar a opcao de 3x Drizzle para alterar a
resolucao.<br>
<br>
Uma forma para limitar o aumento da memoria e espaco em disco para usar a opcao
Drizzle e usar <a href="#customrect">o rectangulo personalizado</a>.<br>
<br>
<b>Drizzle e Bayer Drizzle</b><br>
Embora haja quem use as duas funcionalidades no metodo Drizzle a verdade e que nao e
recomendavel o seu uso. O DSS emite um aviso se tentar esta dupla funcionalidade.</font></p>
  <hr size="2" width="100%" noshade color="blue" align="center">
<p align="justify"><b><font face="Arial" size="4" color="#FF0000">
<a name="cometstacking"></a>Integracao de Cometas</font></b><br>
<font face="Arial" size="2">Os cometas sao objectos que se movem rapidamente e quando
as imagens sao integradas em conjunto duas coisas podem acontecer:<br>
- se o alinhamento entre as imagens e feito usando as estrelas, o cometa fica
fosco<br>
- se o alinhamento e feito pelo cometa as estrelas deixam pequenos traços de
arrastamento.<br>
<br>
Começando na versao 3.0, do DeepSkyStacker, adicionei duas opcoes para integracao de cometas:<br>
- Criar uma imagem alinhada no cometa tendo como consequencia o arrastamento de estrelas<br>
- Criar uma imagem alinhadas nas estrelas e aqui nao tera arrastamento
das estrelas.<br>
<br>
Aqui esta um exemplo de diferentes modos de integracao (passe o rato-mouse em cima do texto
para ver os resultados)</font></p>
<table border="0" cellspacing="1" width="100%" id="AutoNumber2">
  <tr>
    <td width="41%">
<p style="margin-left: 10; margin-right: 10"><font face="Arial" size="2"><br>
<b><a onmouseover="document['COMETSTACK'].src='../images/FuzzyComet.jpg';" href="javascript:void(0);">
Integraccao normal-stand</a></b><br>
A posicao do cometa e ignorada.<br>
O cometa esta fosco e as estrelas nao tem arrastamento (rasto).</font></p>
<p style="margin-left: 10; margin-right: 10"><font face="Arial" size="2">
<b><a onmouseover="document['COMETSTACK'].src='../images/StarTrails.jpg';" href="javascript:void(0);">
Integracao do Cometa : rasto das estrelas</a></b><br>
Usada a posicao do cometa,a imagem esta alinhada com o cometa.<br>
A posicao das estrelas sao usadas para compensar qualquer rotacao do movimento de campo.<br>
<br>
<b><a onmouseover="document['COMETSTACK'].src='../images/StarFreeze.jpg';" href="javascript:void(0);">
Integracao de Cometas e estrelas : &quot;Captacao das primeiras estrelas.Parando-as&quot;</a></b><br>
Usada a posicao do Cometa.<br>
A primeira integracao e criada para extrair o cometa do background.<br>
A segunda integracao e criada para "parar-freeze" as estrelas (o cometa e subtraido de
fotograma registado e calibrado antes de ser integrado).<br>
No final a imagem obtida inserindo o cometa emcima da imagem com as estrelas pontuais e sem arrastamento.</font></p>
<p style="margin-left: 10; margin-right: 10">&nbsp;</p>
    </td>
    <td width="59%" align="center">
    <img name = "COMETSTACK" id = "COMETSTACK" border="0" src="../images/FuzzyComet.jpg" width="472" height="366"></td>
  </tr>
</table>
<p align="justify"><font face="Arial" size="2">&nbsp;<br>
<br>
<br>
</font><font face="Arial"><b><font size="2">O que e necessario fazer <br>
1 - passo: Referenciar o centro do cometa</font><br>
</b></font><font face="Arial" size="2">DeepSkyStacker nao faz automaticamente
a deteccao do centro do cometa nos fotogramas.<br>
<br>
Referencie a posicao do cometa <b>em todos os fotogramas</b>. So
se faz uma vez.</font></p>
<p align="justify"><font face="Arial" size="2">Para o fazer, selecione o fotograma na lista e use o
<a href="userguide.htm#imagepreview">Modo de Edicao do Cometa</a> coloque o cometa no centro.<br>
Se o centro do cometa esta muito longinquo ou demasiado brilhante pode forçar o DeepSkyStacker para
aceitar qualquer posiçao pressionando a tecla ( do teclado ) Shift posicionando
o centro do cometa.<br>
<br>
Agora guarda o resultado cliquando em Guardar alteracoes no botao do toolbar.<br>
Se nao quer que o DSS lhe faça a pergunta, acione a opcao para guardar as alteracoes
automaticamente.<br>
<br>
Logo que o cometa esteja referenciado na posicao a configuracao e guardada e comecara a ver +(C) contagem
de estrelas adicionadas #lista de colunas de estrelas.<br>
<br>
Tem de repetir a operacao por cada imagem-fotograma. </font></p>
<table border="1" cellspacing="1" width="100%" id="AutoNumber6" cellpadding="10">
  <tr>
  <span>
    <td width="100%" bgcolor="#FFFF99"><font face="Arial" size="2">
  <span lang="EN-US">
    <b>Dica<br>
    </b> Se o tempo/data das imagens-fotogramas esta correcto ( como e utilizado nas
    DSLRs e algumas cameras CCD ) podera classificar as imagens por tempo/data e
    colocar. <br>
    DeepSkyStacker calculara automaticamente (antes de integrar) a
    posicao do centro do cometa em todas as imagens. <br>
    Para fazer isto sera usado o decorrer do tempo entre a primeira imagem e cada
    imagem para interpolar a posicao do cometa.</span></font></td>
  </span>
  </tr>
</table>
<p align="justify"><font face="Arial" size="2">&nbsp;</font><font face="Arial"><b><font size="2">2 - Passo: Selecionar o modo de Integracao</font><br>
</b></font><font face="Arial" size="2">Isto e feito na opcao da Aba
<a href="userguide.htm#comettab">Cometa Aba</a> disponivel nos parametros da caixa
de integracao.<br>
Esta Aba estara disponivel se tiver no minimo duas imagens-fotogramas (incluindo o
fotograma de referencia) tenham sido registadas no cometa.<br>
Desta Aba pode selecionar um dos t^res modos de integraccao para cometas.<br>
&nbsp;<br>
<b>Cometa composto e cometa sem imagem</b><br>
DeepSkyStacker usa imagens com o registo do cometa e imagens sem o
registo do cometa na mesma integracao.<br>
Isto e util para obter um melhor sinal no racio do ruido no resultado final
especialmente na obtencao de detalhes longinquos na imagem (por exemplo: quando o cometa
passa proximo de uma nebulosa ou galaxia).</font></p>
<p align="justify"><font face="Arial" size="2"><b>Qual o metodo de integracao usar<br>
</b>Se procura o metodo de arrastamento de estrelas, entao o, metodo proporcional e o melhor
metodo.<br>
Nos outros casos use a Media-Mediana stacking para pequenas integracoes e
kappa-sigma para grandes integracoes.</font></p>
<p align="justify"><font face="Arial" size="2"><b>Que resultados posso esperar</b><br>
O mais recomendado dos algaritmos e o da integracao do Cometa e das estrelas preferencialmente
com o efeito da paragem de estrela (ver: integracao de cometas).<br>
O movimento suave dos cometas sao dificeis de detectar em objectos grandes ou grandes estrelas e
neste caso o processo de extraccao do cometa poderia ser menos perfeita.<br>
Em todos os casos, se fizer uma serie de imagens da mesma area sem o cometa
(dia apos dia) melhorara subtancialmente a qualidade final da imagem.</font></p>
  <hr size="2" width="100%" noshade color="blue" align="center"></span>
<p align="justify"><b>
<span lang="EN-US" style="font-size: 13.5pt; font-family: Arial; color: red">
<a name="rawdecod"></a>Processo de desenvolvimento das imagens RAW</span><span lang="EN-US" style="font-family: Arial"><br>
</span><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Ficheiros
RAW descodificados</span><span lang="EN-US" style="font-family: Arial"><br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Os
ficheiros RAW criados pelas DSLRs sao descodificados usando
<a href="http://www.cybercom.net/~dcoffin/dcraw/" target="_blank" style="color: blue; text-decoration: underline; text-underline: single">
DCRAW</a> do Dave Coffin.<br>
Esta lista tem o protocolo com a maior parte das DSLRs e esta constantemente a ser actualizada por Dave
Coffin. DeepSkyStacker tambem usa a ultima versao do DCRAW e faz
actualizacoes regulares .</span></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="2" width="100%" noshade color="blue" align="center"></span>
</div>
<p align="justify"><b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Processo de desenvolvimento
de ficheiros RAW</span><span lang="EN-US" style="font-family: Arial"><br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">O
ficheiro e equivalente a um negativo digital. Assim, cada ficheiro Raw precisa de
um processo de desenvolvimento de modificacao de natureza e estrutura.<br>
Existem dois tipos de ficheiros RAW: os que sao usados pela Bayer matrix (a maior parte)
e os que nao sao usados pela  Bayer matrix (por exemplo: os que usam a Foveon chip).<br>
<br>
Nas explicacoes seguintes eu considewrei os ficheiros raw criados created pela
Bayer matrix baseados nas DSLR.</span></p>
<div class="MsoNormal" align="center" style="text-align:center">
  <span lang="EN-US">
  <hr size="2" width="100%" noshade color="blue" align="center"></span>
</div>
<p align="justify"><b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">Bayer 
Matrix<br>
</span></b><span lang="EN-US" style="font-size: 10.0pt; font-family: Arial">
O que e a Bayer matrix ?<br>
Quando se usa 8 mega-pixels na DSLR, o chip CMOS ou CCD os valores sao a preto
e branco ( estes valores em raw tem o codigo RGB implicito ) nos 8 mega-pixels que serao submetidos na Bayer matrix
que transformara esses valores em padroes de filtros RGBG ou CYMK mediante cada pixel.<br>
<br>
No caso dos filtros RGBG  um quarto (1/4pixels) dos pixels serao capturados
<span style="color:red">vermelho</span>, mais 1/4 <span style="color:blue">azul</span>
e ficam faltando metade(1/2) <span style="color:green">verde</span>.<br>
Assim os 8 mega-pixels da DSLR produzem imagens com 2 milhoes de pixels vermelhos, a
mesma quantidade de pixels azuis e 4 milhoes de pixels verdes.<br>
<br>
Como as Dslr criam as verdadeiras &quot;true&quot; cores das imagens ?<br>
Interpolando os RBG de uns pixels para os outros e na falta das cores primarias copiando os valores dos pixels proximos.
</span></p>

<hr color="#0000FF">
<p><font size="2" face="Arial"><b>Reconstrucao da cor usando a Bayer matrix - <font color="#0000FF">
Interpolacao</font></b></font></p>

<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="87%" id="AutoNumber1">
  <tr>
    <td width="51%">
    <p class="Standard"><font size="2" face="Arial">A primeira forma de reconstruir as cores
    do Bayer matrix e interpolar os pixels das zonas proximas
    para a zona em causa de que falta.</font></p>
    <p class="Standard">
    <font size="2" face="Arial">Existem muitos metodos de interpolacao disponiveis
    viabilizando maus e bons resultados (linear, gradiente...) mas todos no final
    degradam um pouco a qualidade da imagem quando se tem que compensar a falta de cor
    em determinada area, por defeitos dos pixels.</font><p class="Standard">
    <font face="Arial" size="2">Quando algumas imagens sao ignoradas por pequenissimas manchas pelo
   processo de integracao, a integracao de muitas imagens-fotogramas perde muitos finos
    detalhes.<br>
    <br>
    Se pretende usar o metodo de interpolacao fique a saber que o software (CD)
    que acompanha a sua DSLR (kit no acto da compra) e a pior escolha que faz se o
    usar para astrofotografia. <br>
    <br>
    Se quiser transformar os seus ficheiros RAW para ficheiros TIFF de 16 bit
    facilmente o fara usando o DeepSkyStacker.<br>
&nbsp;</font></td>
    <td width="51%">
    <img border="0" src="../images/BayerInterpolation.jpg" width="375" height="285" align="right"></td>
  </tr>
</table>
<hr color="#0000FF">
<p><font size="2" face="Arial"><b><a name="superpixel"></a>Reconstrucao da cor usando a Bayer matrix - <font color="#0000FF">
 O Super-pixel</font></b></font></p>

<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="87%" id="AutoNumber2">
  <tr>
    <td width="51%">
    <p class="Standard"><font face="Arial" size="2">With DCRaw e possivel ter acesso
    ao Bayer matrix antes de qualquer interpolacao. Deste modo e possivel usar
    outros metodos para reconstrucao das verdadeiras cores sem estimar
    a falta de cores primarias.</font></p>
    <p class="Standard">
    <font size="2" face="Arial">O metodo do Super-Pixel does nao faz interpolacao mas
    em vez disso cria um simples super pixel de cada grupo de 4 pixels (RGBG).</font></p>
    <p class="Standard"><font size="2" face="Arial"><br>
    De facto cada grupo de 4 pixels contem toda a informacao necessaria para
    cada cor primaria e para a luminancia.<br>
    Este metodo muito simples, faz uma especie de desconto, para dividir
    o tamanho do resultado da imagem por 4.<br>
    <br>
    O metodo do Superpixel da muito bons resultados quando apenas algumas imagens
   estao disponiveis para o processo de integracao.</font></td>
    <td width="49%">
    <img border="0" src="../images/BayerSuperPixel.jpg" align="right" width="373" height="280"></td>
  </tr>
</table>
<p>&nbsp;</p>

<hr color="#0000FF">
<p><font size="2" face="Arial"><b><a name="bayerdrizzle"></a>Reconstrucao da cor
usando o Bayer matrix - <font color="#0000FF">Bayer drizzle</font></b></font></p>

<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="87%" id="AutoNumber3">
  <tr>
    <td width="51%">
    <p class="Standard"><font size="2" face="Arial">Este ultimo metodo sugerido
    por Dave Coffin usa a propriedade do processo de integracao para
    avaliar os verdadeiros valores do pixel RGB induvidualmente, resultado do uso &quot;natural&quot;
    da derivada existente entre cada pixel.<br>
    <br>
    Quando um grande numero de imagens-fotogramas estao disponiveis e com os seus sub-pixels
    alinhados, o DeepSkyStacker analisa bit por bit os verdadeiros valores
    primarios de cada pixel, tudo sem interpolacao.<br>
&nbsp;<br>
    Depois do processo de integracao alguns algaritmos sao usados para harmonizar os valores de
    RGB para evitar falhas de informacao logaritmica.<br>
    <br>
    O metodo do Bayer Drizzle da-nos excelentes resultados quando usado com um grande numero disponiveis de
    imagens-fotogramas e com uma guiagem precisa, nao oscilando para mais de um
    pixel (o que e o normal dos casos).</font></td>
    <td width="49%">
    <img border="0" src="../images/BayerDrizzle.jpg" width="375" height="287" align="right"></td>
  </tr>
</table>
<p>&nbsp;</p>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7477345-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>

</html>