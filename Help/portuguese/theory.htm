<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Conceito Teorico: como criar melhores imagens</title>
<style>
<!--
.Standard    { text-align: justify; margin-left: 5; margin-right: 10 }
-->
</style>
</head>

<body>

<p><b><font face="Arial" size="5">Conceito Teórico<br>
</font><font face="Arial" size="4">Como criar imagens melhores</font></b></p>
<blockquote>
  <p>
  <b>
  <font face="Arial"><A href="#WhyCombine">Porque integrar?</a><br>
  <A href="#CombineHowMany">Quantas fotografias são necessárias?</a><br>
  <A href="#Calibration">Calibração: como usar as fotografias do tipo Dark, Flat e Bias/Offset</a></font></b><br>
  <b><font face="Arial"><A href="#ISOSpeed">Qual a sensibilidadede ISO usar?</a></font></b><br>
  <b><font face="Arial"><A href="#CalibrationProcess">O Processo de Calibração</a></font></b></p>
</blockquote>
<p>
<hr color="#0000ff"></p>
<p align="justify"><font face="Arial"><b><font size="4" color="#ff0000"><a name="WhyCombine">
</a></font><font color="#ff0000" size="4">Porque Integrar?</font><font size="2"><br>
A resposta é simples: para aumentar a razão Sinal/Ruído (SNR).</font><br>
</b><font size="2">A imagem final resultante é mais luminosa? Não.<br>
O resultado da imagem final é mais colorida? Não.<br>
<br>
O segredo esta em integrar muitas fotografias numa única fotografia para aumentar o nível da informação ou razão Sinal/Ruído (SNR).
o resultado não será nem mais luminoso nem mais colorido mas contém
menos ruido o que permitira intensificar o histograma para melhorar a definição,
evidenciando os pequenos detalhes e as cores RGB.</font></font></p>
<table id="AutoNumber1" cellSpacing="1" width="100%" border="0">
  <tr>
    <td vAlign="top" width="38%">
    <p style="MARGIN-RIGHT: 10px" class="Standard"><font face="Arial" size="2">O exemplo do lado direito
    mostra o resultado de uma integração de 1, 2, 4, 16 e 32 fotografias.<br>
    <br>
    Não foi feita a calibração e alguns pixels quentes são visíveis em alguns casos (sem a subtração das imagens 
    Dark e Bias/Offset, assim como, sem divisão pelo Flat Frame).<br>
    <br>
    Passe o mouse por cima da foto e veja o resultado da integração de &nbsp; <br>
    <b>&nbsp;&nbsp;
    <A onmouseover="document['STACKRESULT01'].src='../images/Theory/Stack_1.jpg';;document.getElementById('LEGEND01').innerHTML='One Light Frame';" href="javascript:void(0);">
    1 imagem</a></b><br>
    <b>&nbsp;&nbsp;
    <A onmouseover="document['STACKRESULT01'].src='../images/Theory/Stack_2.jpg';document.getElementById('LEGEND01').innerHTML='Stack of 2 light frames';" href="javascript:void(0);">
    2 imagens</a></b><br>
    <b>&nbsp;&nbsp;
    <A onmouseover="document['STACKRESULT01'].src='../images/Theory/Stack_4.jpg';;document.getElementById('LEGEND01').innerHTML='Stack of 4 light frames';" href="javascript:void(0);">
    4 imagens</a></b><br>
    <b>&nbsp;&nbsp;
    <A onmouseover="document['STACKRESULT01'].src='../images/Theory/Stack_16.jpg';;document.getElementById('LEGEND01').innerHTML='Stack of 16 light frames';" href="javascript:void(0);">
    16 imagens</a></b><br>
    <b>&nbsp;&nbsp;
    <A onmouseover="document['STACKRESULT01'].src='../images/Theory/Stack_32.jpg';;document.getElementById('LEGEND01').innerHTML='Stack of 32 light frames';" href="javascript:void(0);">
    32 imagens</a></b></font></p>
    <p class="Standard"><font face="Arial" size="2">Como se pode ver a fotografia resultante não mostra
    aumento da luminosidade ou aumento da coloração quando se incrementa o número de imagens astronomicas integradas do objeto astronômico, o que
    aumenta SIM é a suavidade, a imagem fica mais enevoada.</font></p>
    <p>&nbsp;</p></td>
    <td width="62%">
    <p align="center">
    <IMG id=STACKRESULT01 border=0 name=STACKRESULT01 src="../images/Theory/Stack_2.jpg" width=591 height=591><br>
    <font face="Arial" size="2"><b id="LEGEND01" name="LEGEND01">
    Apenas uma fotografia</b></font></p></td>
  </tr>
</table>
<hr color="#0000ff">
<p align="justify"><b><font face="Arial" size="4" color="#ff0000"><a name="CombineHowMany"></a>
Quantas fotografias são necessárias</font></b><font face="Arial"><b><font color="#ff0000" size="4">?</font><font size="2"><br>
Quanto mais melhor, mas acima de um certo valor será menos eficiente.</font><br>
</b><font size="2">A razão de Sinal/Ruído aumenta com a raiz quadrada
do número de fotografias integradas, independente do tempo de exposição de cada fotografia.<br>
Isto é verdadeiro para todos os métodos de integração (seja o método de média, mediana, Kappa-Sigma
, média ponderal auto adaptiva , ...) exceto o do método da média ponderal da entropia uma vez que emprega a proporção da entropia de cada pixel
e assim incrementando o sinal de ruído que é a grande fonte da entropia.</font></font><font face="Arial" size="2">.</font></p>
<p align="justify"><font face="Arial" size="2">Isto significa que tendo uma base SNR de 1, quando
integramos 10 fotografias o SNR aumenta para 3.16 (raiz quadrada de 10). Para 30 imagens temos SNR de
5.47, para 50 imagens temos SNR de 7.07, para 100 imagens temos SNR de 10 e para 300 imagens
temos SNR de 17.32.</font></p>
<p align="justify"><font face="Arial" size="2">Como você pode ver, para elevar o ganho de SNR para 7 são necessárias 50 fotografias (isto é de 1 a 50), no entanto para ter o mesmo ganho de SNR da ordem de 7 
a partir de 100 fotografias, são necessárias mais 200 fotografias (isto é de 100 para 300).</font></p>
<p align="justify"><font face="Arial" size="2"><b>Os conjuntos de 100 fotografias x 1 minuto de exposição e
10 fotografias x 10 minutos oferecem o mesmo resultado?</b><br>
Teoricamente Sim, tomando em consideração apenas o SNR, mas na prática definitivamente NÃO, face ao resultado final, considerando o tempo de exposição.<br>
A diferença entre 10 minutos de exposicao e 1 minuto de exposição está em que o
SNR em 10 minutos de exposição é maior que o 3.16 relativamente a 1 minuto de exposição.</font></p>
<p align="justify"><font face="Arial" size="2">Será obtido o mesmo SNR se integrarmos 10
fotografias de 10 minutes ou 100 fotografias de 1 minuto. No entanto, o sinal capturado pelo chip
será diferente (a parte interessante). De forma simples, você só vai obter sinal se o tempo de exposição for suficientemente longo 
para capturar os fótons do objeto astronômico na mesma posição na maioria de suas imagens, de forma que esse sinal (fótons) não sejam considerados como ruído.</font></p>
<p align="justify"><font face="Arial" size="2">Por exemplo, no caso de uma nebulosa longínqua e fraca, você pode capturar  
fótons em cada 10 minutos. Se usar 10 minutos de exposição, terá capturado
fótons para cada uma das fotografias que quando integradas resultará no sinal ampliado. <br>
Se estiver usando apenas 1 minuto de exposição para a captura dos fótons, em apenas algumas
fotografias esse sinal estará presente, quando integradas será considerado como ruído, visto esse sinal não estar presente em todas as fotografias do objeto astronômico.</font></p>
<p align="justify"><font face="Arial" size="2"><b>Posso integrar duas ou mais fotografias finais?<br>
</b>Afirmativo, a regra do quadrado aplica-se também para pequenas integrações.<br>
<br>
Quando integramos duas fotografias o SNR aumenta pra  1.414 (raiz quadrada de 2).<br>
Se as duas fotografias tiverem o mesmo SNR, então é o mesmo que ter uma simples integração.
Isto não quer dizer que essa integração resulta na mesma imagem final, apenas que o
SNR se manteve o mesmo.<br>
<br>
No entanto, se uma integração contiver mais fotografias que a outra, o SNR final das
duas integrações será diferente e o SNR será mais baixo do que uma simples integração contendo todas as fotografias.<br>
<br>

Thus by combining the result of a 10x1 minute stack with a single 1 minute frame the SNR is roughly the same as the one obtained by combining 2 light frames. This is due to the fact that when combining two images the noise is additive and the best image is damaged by the worse image in the process.

Integrando o resultado de 10 X 1 minuto com um fotograma de 1 minuto
de SNR e igual na integracao de 2 fotogramas de luz.
Isto e o que acontece quando combinamos-integramos duas imagens-fotogramas de ruido adicionado em que
a melhor imagem esta danificada e a pior esta a ser integrada.</font></p>
<hr color="#0000ff" SIZE="1">
<p align="justify"><b><font face="Arial" size="4" color="#ff0000"><a name="Calibration"></a>C</font><font face="Arial" color="#ff0000" size="4">alibracao:
como usar os fotogramas do dark, flat e bias <br>
</font></b><font face="Arial" size="2">A calibracao e um processo em que consiste
na subtraccao do bias e sinal dark dividindo pelo sinal flat.<br>
Nao explicarei aqui como se fazem os fotogramas de dark, bias e flat ( veja
<A href="faq.htm#lightdarkflatoffset">aqui</a>) para melhor compreender como
fazer uso deles na obtencao das melhores imagens possiveis.</font></p>
<p align="justify"><font face="Arial" size="2"><b>Uma boa ideia</b><br>
Todos dizem que temos que tirar fotogramas do dark, bias e flat para criar
boas imagens, mas se o fizer da forma errada facilmente danificara
bons ficheiros de luz, e ficara desapontado com os resultados.</font></p>
<p align="justify"><font face="Arial" size="2">A boa novidade e que e facil obter
bons resultados. Aqui se encontram as respostas e as formas de o fazer.<br>
<br>
<b>Os MAUS Conceitos mais usuais</b><br>
E normal pensar-se que o numero de fotogramas de dark, bias e flat
esta relacionado com o numero de fotogramas de luz ( fotoes luminosos ).<br>
Muitos usam poucos (por vezes nem um) fotogramas de dark, bias e flat
... porem podem obter muito melhores resultados usando um grande numero de fotogramas de dark,
bias e flat com o mesmo numero de fotogramas de luz ( fotoes luminosos ).<br>
<br>
Seguindo a regra da raiz quadrada tera masters mais limpos e perfeitos usando
um grande numero de fotogramas. Lembre-se que esta tentando tirar o dark
e o sinal bias, e nao o ruido que vem por inerencia com os fotogramas. <br>
<br>
Por exemplo: quando subtrai o Master dark por cada fotograma esta
adicionando ruido do fotograma do master dark ao fotograma em causa. O pequeno
ruido do Master dark, será adicionado ao fotograma em causa.
O mesmo se passa com o  master bias e o master flat.<br>
<br>
Na verdade se usar um pequeno numero de fotogramas para a criacao de
masters facilmente triplicara o ruido na clibracao do fotograma (bias e
dark subtraidos e divididos pelo flat) comparando com o ruido,
antes da calibracao. </font></p>
<p align="justify"><font face="Arial" size="2">No final tera 9 vezes mais (3 ao quadrado) fotoes
( fotogramas de luz ) aumentando o nivel de ruido para um nivel, para o qual podera usar um programa
de limpeza de ruido.</font></p>
<table id="AutoNumber2" cellSpacing="1" width="100%" border="0">
  <tr>
    <td vAlign="top" width="38%">
    <p class="Standard"><font face="Arial" size="2">O exemplo da imagem do lado direito mostra
    o resultado da integracao de (passe com o rato-mouse por cima da imagem)<br>
    <br>
    <A onmouseover="document['STACKRESULT02'].src='../images/Theory/NoCalibration.jpg';;document.getElementById('LEGEND02').innerHTML='Stack of 32 light frames (no calibration)';" href="javascript:void(0);">
    32 fotogramas (sem calibracao)</a><br>
    <br>
    <A onmouseover="document['STACKRESULT02'].src='../images/Theory/Calibration2.jpg';;document.getElementById('LEGEND02').innerHTML='Stack of 32 light frames (2 darks, 2 flats and 2 biases calibration)';" href="javascript:void(0);">
    32 fotogramas (2 darks, 2 flats e 2 bias - todos  calibrados)</a><br>
    <br>
    <A onmouseover="document['STACKRESULT02'].src='../images/Theory/Calibration20.jpg';;document.getElementById('LEGEND02').innerHTML='Stack of 32 light frames (20 darks, 20 flats and 20 biases calibration)';" href="javascript:void(0);">
    32 fotogramase0 darks, 20 flats and 20 bias - todos calibrados)</a><br>
    <br>
    Como pode constactar o aumento do numero de fotogramas de dark, flat e bias
    mudifica o resultado da imagem tornando os detalhes visiveis.</font></p></td>
    <td width="50%">
    <p align="center">
    <IMG id=STACKRESULT02 border=0 name=STACKRESULT02 src="../images/Theory/Calibration20.jpg" width=591 height=591><br>
    <font face="Arial" size="2"><b id="LEGEND02" name="LEGEND02">Integrados 32 fotogramas (sem calibracao)</b></font></p></td>
  </tr>
</table>
<p align="justify"><font face="Arial" size="2">Esta e a razao pela qual, voce deve usar o maior
numero possivel de dark/bias/flat . Na pratica 20 fotogramas e o minimo se nao quiser adicionar muito ruido,
mas muito melhor ficara, com 50 a 100 fotogramas que lhe fara realcar verdadeiramente os detalhes.<br>
<br>
<b>Um apontamento sobre os Pixels Quentes</b><br>
Pixels quentes, sao pixels que tiveram um comportamento deficiente. Esses pixels, tem um sinal muito
forte de tal maneira que conseguem ser visiveis apesar de se ter feito o dark a cada fotograma de fotoes. <br>
<br>
Claro que quando  se subtrai o fotograma dark aos fotoes da imagem, o resultado e a remocao dos pixels quentes
o que pode dar a sensacao que o fotograma dark ( dark frame ) ter sido eficaz ... mas
nao e bem assim. <br>
Ao mesmo tempo que se subtrai duplica-se o ruido calibrado ( note-se CALIBRADO )
dos fotoes luminosos.</p>

<hr color="#0000ff" SIZE="1">

<p align="justify"><font face="Arial" size="2"><a name="ISOSpeed"></a></font>
<font face="Arial" color="#ff0000" size="4"><b>Que velocidade ISO usar?<br>
</b></font><font face="Arial" size="2">Uma pergunta frequente e a resposta
e simples: nao tem importancia...escolha voce.<br>
<br>
A verdade e que a velocidade ISO e uma funcionalidade das cameras DSLR. Por exemplo os chip ( ccd ou cmos )
que equipam as cameras para astrofotografia (estas cameras nao usam velocidade ISO) tem
os mesmos resultados.<br>
O uso da velocidade ISO faz obter mais fotoes, amplificando-os o seu sinal,
mas tambem, nao nos devemos esquecer, que amplifica tambem o sinal de ruido.</font></p>
<p align="justify"><font face="Arial" size="2">A boa novidade esta em que voce nao necessita
de alterar a velocidade de ISO para capturar um objecto longinquo. So precisara fazer
longas exposicoes.<br>
<br>
Claro que na pratica e um pouco mais complicado obter resultados baseado no que disse no paragrafo de cima,
alem do que a velocidade ISO varia um pouco de marca par marca.<br>
Varia tambem das caracteristicas de cada sensor chip (leitura de ruido e
ruido electronico) que nao e simples de avaliar, e ainda da concepçao electronica do circulo electronico de
cada camera ( Dslr sao diferentes das cameras para astrofotografia ).<br>
Christian Buil avaliou oa valores de velocidade ISO para algumas Canon DSLRs</font></p>
<table border="1" cellspacing="1" width="43%" id="AutoNumber3">
  <tr>
    <td width="35%"><b><font face="Arial" size="2">DSLR</font></b></td>
    <td width="65%"><b><font face="Arial" size="2">Recomendado (Optimo) Velocidade
    ISO</font></b></td>
  </tr>
  <tr>
    <td width="35%"><font face="Arial" size="2">Canon EOS 10D&nbsp;&nbsp;&nbsp;
    </font></td>
    <td width="65%" align="right"><font face="Arial" size="2">400&nbsp;&nbsp;&nbsp; 
    (290)</font></td>
  </tr>
  <tr>
    <td width="35%"><font face="Arial" size="2">Canon EOS 20D</font></td>
    <td width="65%" align="right"><font face="Arial" size="2">1000&nbsp; (1000)</font></td>
  </tr>
  <tr>
    <td width="35%"><font face="Arial" size="2">Canon EOS 350D</font></td>
    <td width="65%" align="right"><font face="Arial" size="2">800&nbsp;&nbsp;&nbsp; 
    (900)</font></td>
  </tr>
  <tr>
    <td width="35%"><font face="Arial" size="2">Canon EOS 5D</font></td>
    <td width="65%" align="right"><font face="Arial" size="2">1000&nbsp; (1100)</font></td>
  </tr>
</table>
<p>&nbsp;</p>

<hr color="#0000ff" SIZE="1">

<p align="justify"><b><font face="Arial" size="4" color="#ff0000">
<a name="CalibrationProcess"></a>O Processo de Calibracao</font></b><font face="Arial" color="#ff0000" size="4"><b><br>
</b></font><font face="Arial" size="2">O processo de calibracao e como cada serie de ficheiros (fotogramas)
de imagens, darks, flats,...)&nbsp; que nos parece um misterio
mas que na realidade e bastante simples.<br>
<br>
Em baixo esta um grafico que nos mostra o processo de calibracao total, quando todos os ficheiros estao disponiveis :</font></p>

<p align="left"><font face="Arial" size="4"><b>Processo de Calibracao total (todos
os ficheiros disponiveis)</b></font><font face="Arial" size="2"><br>
<br>
<IMG border=0 src="../images/portuguese/Calibration_Full.jpg" width=918 height=456></font></p>

<p align="justify"><font face="Arial" size="2"><br>
No entanto e o mais comum e o nao uso de ficheiros de calibracao dark, bias, flat, ... O grafico esta em baixo :</font></p>

<p align="justify"><font face="Arial" size="4"><b>Processo de calibracao alternativo
I (sem dark flat frames)</b></font><font face="Arial" size="2"><br>
<br>
<IMG border=0 src="../images/portuguese/Calibration_Alternate1.jpg" width=918 height=454></font></p>

<p align="justify"><font face="Arial" size="2">Ha quem use fazer a calibracao, mas sem bias.
Veja o grafico em baixo:</font></p>

<p align="justify"><font face="Arial" size="4"><b>Processo de calibracao alternativo
II (sem bias frames)</b></font><font face="Arial" size="2"><br>
<br>
<IMG border=0 src="../images/portuguese/Calibration_Alternate2.jpg" width=918 height=454></font></p>

<p align="justify"><font face="Arial" size="2">Qualquer outro metodo para fazer calibracoes
e considerado improprio. So tem estas 3 possibilidades.</font></p>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7477345-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</FONT>

</body>

</html>